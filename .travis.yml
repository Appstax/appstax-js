language: node_js
node_js:
- '0.12'
script:
- npm run-script test-ci
- npm run-script build-sdk
git:
  depth: 1
deploy:
  - provider: releases
    api_key:
      secure: jUE2mYhPRhTQ87cDcSXIiI1ncoqTq1vNeKJBqb8wbpkYE6Fmp5S7/nBV+iXNwyoV9Ls3LvvEz6FLjecX7UI2eVrLtjLGZhro9HqCBKoWDX7H6usLR6WBFeycY+0xFTTMRTTE/0LfTpOrZrbs03wyt8WhlyvKHoSBpjN6UPBEDvs=
    skip_cleanup: true
    file:
      - "build/appstax-js.zip"
      - "build/appstax.js"
      - "build/appstax.min.js"
    on:
      tags: true
  - provider: npm
    email: support@appstax.com
    api_key:
      secure: TgRRjen2dVeZIHjnfiB0RMfvhoHFkE4k+UyF62ZJ6CU50a/Yhmy+C8/bjgpZ7MrFskk4YeFFy3/B4Ckw+WlxeHyEB4J4Pzwgx/Ib62kcdN97UtPym3/sj9Zma68BB05ruZ8WOS4SfQtgX8mjEejXyi9n3Z5gnnAdmaSnyI2TNmg=
    on:
      tags: true
